(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29394,e=>{"use strict";var t=e.i(43476);e.i(36180);var s=e.i(98925),l=e.i(71645),a=e.i(89475);e.i(61086);var r=e.i(27215);function c(){let e=(0,l.useRef)(null),c=(0,l.useRef)(null),o=(0,l.useRef)(null),[n,i]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(1),[b,p]=(0,l.useState)(1),[x,y]=(0,l.useState)([]),[g,j]=(0,l.useState)({title:"",subTitle:"",price:null,desc:[{title:"",desc:""}],photo:[],category:[],sizes:[],color:[],tags:[],stock:{}});(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,s.getDoc)((0,s.doc)(a.db,"admin","categories"));e.exists()&&y(e.data().list||[])}catch(e){console.error("Error fetching categories:",e)}})()},[]);let f=(e,t,s)=>{let l=[...g.desc];l[e][t]=s,j(e=>({...e,desc:l}))},N=e=>{let t=Array.from(e.target.selectedOptions).map(e=>e.value);j({...g,sizes:t})},v=e=>{j({...g,[e.target.name]:e.target.value})},C=e=>{let t=e.target.files[0];if(!t)return;let s={...g};s.photo.some(e=>e.name===t.name)?alert("File already exists, choose another file."):(s.photo.push(t),j(s))},k=async t=>{if(t.preventDefault(),!g.title||!g.subTitle||!g.price||!g.desc.length||!g.photo.length||!g.sizes.length||!g.color.length){c.current.style.display="block",i("Please fill all the fields.");return}if(g.category)o.current.style.display="none";else{o.current.style.display="block";return}e.current.style.display="block";try{let e=[];for(let t of g.photo){let s=(0,r.ref)(a.storage,`photos/${t.name}`);await (0,r.uploadBytes)(s,t),e.push(await (0,r.getDownloadURL)(s))}let t={title:g.title,subTitle:g.subTitle,price:parseInt(g.price),desc:g.desc,sizes:g.sizes,color:g.color,photo:e,category:g.category,tags:g.tags,stock:g.stock};await (0,s.addDoc)((0,s.collection)(a.db,"products"),t),c.current.style.display="block",i("Product has been uploaded.")}catch(e){console.error(e),c.current.style.display="block",i("Error while uploading product.")}e.current.style.display="none"};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"mt-5 text-center",children:"Add Product"}),(0,t.jsxs)("div",{ref:c,style:{display:"none"},className:"alert alert-success alert-dismissible fade show",role:"alert",children:[n,(0,t.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("form",{className:"m-3",onSubmit:k,children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Category"}),(0,t.jsxs)("select",{className:"form-select",multiple:!0,name:"category",onChange:e=>{let{name:t,options:s}=e.target,l=Array.from(s).filter(e=>e.selected).map(e=>e.value);j(e=>({...e,[t]:l}))},value:g.category,children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select category"}),x.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("p",{className:"text-danger",ref:o,style:{display:"none"},children:"Please Select Category Carefully."})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Title"}),(0,t.jsx)("input",{required:!0,type:"text",name:"title",value:g.title,onChange:v,className:"form-control"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Sub Title"}),(0,t.jsx)("input",{required:!0,type:"text",name:"subTitle",value:g.subTitle,onChange:v,className:"form-control"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Description"}),g.desc.map((e,s)=>(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Section Title",value:e.title,onChange:e=>f(s,"title",e.target.value),className:"form-control mb-1"}),(0,t.jsx)("textarea",{placeholder:"Section Description",value:e.desc,onChange:e=>f(s,"desc",e.target.value),className:"form-control"}),g.desc.length>1&&(0,t.jsx)("button",{type:"button",className:"btn btn-danger mt-2",onClick:()=>{let e=g.desc.filter((e,t)=>t!==s);j(t=>({...t,desc:e}))},children:"Remove"})]},s)),(0,t.jsx)("button",{className:"btn btn-secondary mt-2",type:"button",onClick:()=>{j(e=>({...e,desc:[...e.desc,{title:"",desc:""}]}))},children:"Add One More"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Price"}),(0,t.jsx)("input",{required:!0,type:"number",name:"price",value:g.price,onChange:v,className:"form-control"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Select Size Type"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>m("number"),children:"Numbers"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>m("alphabets"),children:"Alphabets"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{m("free"),j(e=>({...e,sizes:["Free Size"]}))},children:"Free Size"})]}),"number"===d&&(0,t.jsx)("select",{onChange:N,value:g.sizes,multiple:!0,className:"form-control mt-2",children:[28,30,32,34,36,38,40].map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),"alphabets"===d&&(0,t.jsx)("select",{onChange:N,value:g.sizes,multiple:!0,className:"form-control mt-2",children:["S","M","L","XL","2XL","3XL","4XL","5XL"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Select Product Color"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>h(u+1),children:"Add Color"}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{h(Math.max(1,u-1)),j(e=>({...e,color:e.color.slice(0,-1)}))},children:"Remove Last Color"}),(0,t.jsx)("div",{className:"mt-3",children:Array.from({length:u}).map((e,s)=>(0,t.jsx)("input",{type:"text",className:"form-control mb-2",placeholder:"Color name or hex (#ff0000)",value:g.color[s]||"",onChange:e=>{var t;let l;return t=e.target.value,void((l=[...g.color])[s]=t,j({...g,color:l}))}},s))})]}),g.color.length>0&&g.sizes.length>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h5",{children:"Stock Per Size & Color"}),g.color.map(e=>(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("strong",{children:e}),g.sizes.map(s=>(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsxs)("label",{className:"me-2",style:{width:"100px"},children:[s,":"]}),(0,t.jsx)("input",{type:"number",className:"form-control",style:{width:"100px"},value:g.stock?.[e]?.[s]||"",onChange:t=>{var l;return l=t.target.value,void j(t=>({...t,stock:{...t.stock,[e]:{...t.stock[e],[s]:Number(l)}}}))}})]},`${e}-${s}`))]},e))]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label mt-3",children:"Product Photos"}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>p(b+1),children:"Add Image"}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{p(Math.max(1,b-1)),j(e=>({...e,photo:e.photo.slice(0,-1)}))},children:"Remove Last Image"}),Array.from({length:b}).map((e,s)=>(0,t.jsx)("input",{type:"file",onChange:C,className:"form-control mt-2"},s))]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Product Tags"}),(0,t.jsx)("div",{className:"mb-2",children:g.tags.map((e,s)=>(0,t.jsxs)("span",{className:"badge bg-secondary me-2 mb-2",style:{cursor:"pointer"},onClick:()=>j(e=>({...e,tags:e.tags.filter((e,t)=>t!==s)})),children:[e," Ã—"]},s))}),(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Type and press space or enter...",onKeyDown:e=>{if(" "===e.key||"Enter"===e.key){e.preventDefault();let t=e.target.value.trim();t&&j(e=>({...e,tags:e.tags.includes(t)?e.tags:[...e.tags,t]})),e.target.value=""}}})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit"})]})}),(0,t.jsx)("div",{ref:e,className:"text-center position-absolute top-50 start-50 translate-middle",style:{display:"none"},children:(0,t.jsx)("div",{className:"spinner-border",style:{height:"5rem",width:"5rem"},role:"status",children:(0,t.jsx)("span",{className:"sr-only"})})})]})}e.s(["default",()=>c])}]);