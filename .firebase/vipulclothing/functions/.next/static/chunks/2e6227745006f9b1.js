(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68712,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(89475);e.i(51718);var i=e.i(6973);e.i(36180);var l=e.i(98925);e.i(61086);var n=e.i(27215),d=e.i(5766),t=e.i(18566);function o(){let e=(0,t.useRouter)(),[o,c]=(0,a.useState)({}),[m,u]=(0,a.useState)({username:"",name:"",email:"",phone:"",address:"",pincode:"",password:"",confirmPassword:""}),[p,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(),[b,f]=(0,a.useState)(null),j=e=>{let{name:s,value:a}=e.target;u(e=>({...e,[s]:a}))},g=async s=>{if(s.preventDefault(),h(!0),!(()=>{var e;let s,a,r,i,l,n={},{username:d,name:t,email:o,phone:u,address:p,pincode:h,password:v,confirmPassword:x}=m;d||(n.username="Username is required");let b=(e=d,(s=e?.trim())?s.split(/\s+/).length>1?{valid:!1,message:"Username must be a single word"}:/^[a-zA-Z0-9]+$/.test(s)?{valid:!0,message:""}:{valid:!1,message:"Only letters and numbers allowed"}:{valid:!1,message:"Username is required"});b.valid||(n.username=b.message),t||(n.name="Name is required"),o?(a=o,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(n.email="Enter valid Email")):n.email="Email is required",u?(r=u,/^[6-9]\d{9}$/.test(r)||(n.phone="Enter valid Phone Number")):n.phone="Phone number is required",p?p.trim().split(/\s+/).length<4&&(n.address="At least 4 segments are required."):n.address="Address is required",h?(i=h,/^[1-9][0-9]{5}$/.test(i)||(n.pincode="Enter Valid Pincode.")):n.pincode="Pincode is required",v||(n.password="Password is required");let f=(l=v).length<8?"Password must be at least 8 characters":/[a-z]/.test(l)?/[A-Z]/.test(l)?/\d/.test(l)?/[!@#$%^&*]/.test(l)?"":"Must include a special character":"Must include a digit":"Must include an uppercase letter":"Must include a lowercase letter";return f&&(n.password=f),v!==x&&(n.confirmPassword="Passwords do not match"),c(n),0===Object.keys(n).length})())return void h(!1);try{let s=(await (0,i.createUserWithEmailAndPassword)(r.auth,m.email,m.password)).user,a="null";if(v){let e=(0,n.ref)(r.storage,`profile/${s.uid}`);await (0,n.uploadBytes)(e,v),a=await (0,n.getDownloadURL)(e)}let t=(0,l.doc)(r.db,"users",s.uid);await (0,l.setDoc)(t,{...m,profilePhotoUrl:a}),d.toast.success("Account created successfully!"),e.push("/login")}catch(e){console.error(e),"auth/email-already-in-use"===e.code?d.toast.error("Email already in use"):"auth/weak-password"===e.code?d.toast.error("Weak password"):d.toast.error("Something went wrong, try again")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"container mt-5",children:[(0,s.jsx)("h2",{children:"Create Account"}),(0,s.jsxs)("form",{onSubmit:g,className:"p-4 bg-light border rounded",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-9",children:[(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Username"}),(0,s.jsx)("input",{type:"text",className:`form-control ${o.username?"is-invalid":""}`,name:"username",value:m.username,onChange:j}),o.username&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.username})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Name"}),(0,s.jsx)("input",{type:"text",className:`form-control ${o.name?"is-invalid":""}`,name:"name",value:m.name,onChange:j}),o.name&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.name})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"email",className:`form-control ${o.email?"is-invalid":""}`,name:"email",value:m.email,onChange:j}),o.email&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.email})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Phone"}),(0,s.jsx)("input",{type:"text",className:`form-control ${o.phone?"is-invalid":""}`,name:"phone",value:m.phone,onChange:j}),o.phone&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.phone})]})]}),(0,s.jsxs)("div",{className:"col-3 p-0",children:[(0,s.jsx)("input",{onChange:e=>{let s=e.target.files[0];s&&(x(s),f(URL.createObjectURL(s)))},accept:"image/*",className:"d-none",type:"file",id:"photo"}),(0,s.jsxs)("label",{htmlFor:"photo",className:"border border-secondary-subtle d-block text-center",children:[(0,s.jsx)("img",{src:b||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Preview",className:"img-fluid"}),(0,s.jsx)("p",{className:"text-dark mt-1",children:"Choose profile photo"})]})]})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Address"}),(0,s.jsx)("input",{type:"text",className:`form-control ${o.address?"is-invalid":""}`,name:"address",value:m.address,onChange:j}),o.address&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.address})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Pincode"}),(0,s.jsx)("input",{type:"text",className:`form-control ${o.pincode?"is-invalid":""}`,name:"pincode",value:m.pincode,onChange:j}),o.pincode&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.pincode})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Password"}),(0,s.jsx)("input",{type:"password",className:`form-control ${o.password?"is-invalid":""}`,name:"password",value:m.password,onChange:j}),o.password&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.password})]}),(0,s.jsxs)("div",{className:"form-group mb-3",children:[(0,s.jsx)("label",{children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",className:`form-control ${o.confirmPassword?"is-invalid":""}`,name:"confirmPassword",value:m.confirmPassword,onChange:j}),o.confirmPassword&&(0,s.jsx)("div",{className:"invalid-feedback",children:o.confirmPassword})]}),(0,s.jsx)("button",{disabled:p,type:"submit",className:"btn btn-primary w-100",children:p?"Processing...":"Create Account"})]}),(0,s.jsx)(d.Toaster,{position:"bottom-left"})]})}e.s(["default",()=>o])}]);