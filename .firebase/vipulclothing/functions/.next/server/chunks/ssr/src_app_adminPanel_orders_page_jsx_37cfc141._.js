module.exports=[14602,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(30485);var d=a.i(70896);a.i(69387);var e=a.i(60574),f=a.i(20706),g=a.i(6704);function h(){let[a,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)("All"),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=(0,d.getAuth)();(0,d.onAuthStateChanged)(a,async a=>{if(!a)return;let b=(0,e.doc)(f.db,"users",a.uid),c=await (0,e.getDoc)(b);c.exists()&&c.data().isAdmin?(h(!0),u()):(console.log("No admin privileges"),l(!1))})},[]);let u=()=>{let a=(0,e.collection)(f.db,"orders"),b=(0,e.onSnapshot)(a,a=>{let b=a.docs.map(a=>({orderId:a.id,...a.data()}));b.sort((a,b)=>b.date-a.date),j(b),l(!1)});return()=>b()},v=async(a,b)=>{try{await (0,e.updateDoc)((0,e.doc)(f.db,"orders",a),{status:b}),g.toast.success(`Order status updated to: ${b}`,{duration:3e3})}catch(a){console.error("Error updating status:",a),g.toast.error("Failed to update order status")}},w=async a=>{r(!0);try{let b=(0,e.doc)(f.db,"users",a),c=await (0,e.getDoc)(b);c.exists()?p(c.data()):g.toast.error("User not found")}catch(a){console.error("Error fetching user:",a),g.toast.error("Failed to fetch user details")}r(!1),t(!0)},x="All"===m?i:i.filter(a=>a.status===m);return(0,b.jsxs)("div",{className:"container my-4",style:{minHeight:"500px",fontFamily:"Jost Variable"},children:[(0,b.jsx)(g.Toaster,{position:"bottom-left"}),(0,b.jsx)("h2",{className:"text-center mb-4",children:"All Orders (Admin)"}),a&&!k&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"form-label me-2 fw-bold",children:"Filter by Status:"}),(0,b.jsxs)("select",{className:"form-select w-auto d-inline-block",value:m,onChange:a=>n(a.target.value),children:[(0,b.jsx)("option",{value:"All",children:"All"}),(0,b.jsx)("option",{value:"Reject",children:"Reject"}),(0,b.jsx)("option",{value:"Order Requested",children:"Requested"}),(0,b.jsx)("option",{value:"Order Accepted",children:"Accepted"}),(0,b.jsx)("option",{value:"Order Processing",children:"Processing"}),(0,b.jsx)("option",{value:"Out For Delivery",children:"Out for Delivery"}),(0,b.jsx)("option",{value:"Order Complete",children:"Complete"}),(0,b.jsx)("option",{value:"Return Requested",children:"Return Requested"}),(0,b.jsx)("option",{value:"Return Complete",children:"Return Complete"})]})]}),a?k?(0,b.jsx)("p",{className:"text-center",children:"Loading..."}):x.length>0?x.map((a,c)=>(0,b.jsxs)("div",{className:"card mb-4 shadow-sm p-3",children:[(0,b.jsxs)("h5",{className:"mb-3",children:["Order ID: ",(0,b.jsx)("span",{className:"text-primary",children:a.orderId})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Status:"})," ",a.status]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Payment Status:"})," ",a.paymentStatus]}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("div",{className:"row",children:a.products?.map((a,c)=>(0,b.jsx)("div",{className:"col-md-4 col-sm-6 mb-3",children:(0,b.jsxs)("div",{className:"border rounded p-2 h-100 d-flex",children:[(0,b.jsx)("img",{src:a.photo[0],alt:a.title,className:"img-fluid mb-2",style:{height:"150px",objectFit:"cover",borderRadius:"8px"}}),(0,b.jsxs)("div",{className:"ms-3",children:[(0,b.jsx)("div",{children:(0,b.jsx)("strong",{children:a.title})}),(0,b.jsxs)("div",{children:["Size: ",a.size]}),(0,b.jsxs)("div",{children:["₹",a.price]})]})]})},c))})}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("strong",{children:"Subtotal:"})," ₹",a.subtotal,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Shipping:"})," ₹",a.shipping,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Discount:"})," ₹",a.discount,(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Total Amount:"})," ",(0,b.jsxs)("span",{className:"text-success fw-bold",children:["₹",a.totalAmount]})]}),(0,b.jsx)("div",{className:"mt-2 text-muted",children:(0,b.jsxs)("small",{children:["Ordered At:"," ",a.createdAt?.seconds?new Date(1e3*a.createdAt.seconds).toLocaleString():"N/A"]})}),(0,b.jsxs)("div",{className:"mt-3 d-flex gap-2",children:[(0,b.jsxs)("div",{className:"dropdown",children:[(0,b.jsx)("button",{className:"btn btn-outline-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:"Update Status"}),(0,b.jsx)("ul",{className:"dropdown-menu",children:["Reject","Order Requested","Order Accepted","Order Processing","Out For Delivery","Order Complete","Return Requested","Return Complete"].map(c=>(0,b.jsx)("li",{children:(0,b.jsx)("button",{className:"dropdown-item",onClick:()=>v(a.orderId,c),children:c})},c))})]}),(0,b.jsx)("button",{className:"btn btn-info",onClick:()=>w(a.userId),children:"View Details"})]})]},c)):(0,b.jsx)("p",{className:"text-center",children:"No orders found."}):(0,b.jsx)("p",{className:"text-center text-danger mt-5",children:"You must be an admin to view this page."}),s&&(0,b.jsx)("div",{className:"custom-modal-overlay",onClick:()=>t(!1),children:(0,b.jsxs)("div",{className:"custom-modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"custom-modal-header",children:[(0,b.jsx)("h5",{children:"User Details"}),(0,b.jsx)("button",{className:"close-btn",onClick:()=>t(!1),children:"✖"})]}),(0,b.jsx)("div",{className:"custom-modal-body",children:q?(0,b.jsx)("p",{children:"Loading user details..."}):o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Name:"})," ",o.name]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Email:"})," ",o.email]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Phone:"})," ",o.phone]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Address:"})," ",o.address]})]}):(0,b.jsx)("p",{children:"No user details available."})})]})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_app_adminPanel_orders_page_jsx_37cfc141._.js.map