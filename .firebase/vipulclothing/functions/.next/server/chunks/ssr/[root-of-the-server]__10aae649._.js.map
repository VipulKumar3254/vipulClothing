{"version":3,"sources":["turbopack:///[project]/src/styles/productDisplay.module.css [app-rsc] (css module)","../../../../src/app/%5BproductCategory%5D/Filters.jsx/__nextjs-internal-proxy.mjs","../../../../src/app/%5BproductCategory%5D/ProductCardClient.jsx/__nextjs-internal-proxy.mjs","../../../../src/app/search/page.jsx"],"sourcesContent":["__turbopack_context__.v({\n  \"card-img-top\": \"productDisplay-module__JHwf4q__card-img-top\",\n  \"fwMedium\": \"productDisplay-module__JHwf4q__fwMedium\",\n  \"gridMaker\": \"productDisplay-module__JHwf4q__gridMaker\",\n  \"imgContainer\": \"productDisplay-module__JHwf4q__imgContainer\",\n  \"noProducts\": \"productDisplay-module__JHwf4q__noProducts\",\n  \"placeholder-card\": \"productDisplay-module__JHwf4q__placeholder-card\",\n  \"placeholder-img\": \"productDisplay-module__JHwf4q__placeholder-img\",\n  \"placeholder-text\": \"productDisplay-module__JHwf4q__placeholder-text\",\n  \"productImg\": \"productDisplay-module__JHwf4q__productImg\",\n  \"pulse\": \"productDisplay-module__JHwf4q__pulse\",\n  \"short\": \"productDisplay-module__JHwf4q__short\",\n  \"textBlack\": \"productDisplay-module__JHwf4q__textBlack\",\n  \"title\": \"productDisplay-module__JHwf4q__title\",\n  \"toaster\": \"productDisplay-module__JHwf4q__toaster\",\n  \"wishList\": \"productDisplay-module__JHwf4q__wishList\",\n  \"wishlist-hover\": \"productDisplay-module__JHwf4q__wishlist-hover\",\n});\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/[productCategory]/Filters.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/[productCategory]/Filters.jsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/[productCategory]/ProductCardClient.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/[productCategory]/ProductCardClient.jsx\",\n    \"default\",\n);\n","import { db } from \"@/firebaseConfig\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport \"@/styles/productDisplay.module.css\";\r\nimport Link from \"next/link\";\r\nimport Filters from \"../[productCategory]/Filters\";\r\nimport ProductCardClient from \"../[productCategory]/ProductCardClient\";\r\nimport { Suspense } from \"react\";\r\n\r\n// ðŸ”¹ Unified search function (server-side)\r\nasync function getProducts(term) {\r\n  const map = new Map();\r\n  const underMatch = term.match(/under\\s+(\\d+)/i);\r\n  const aboveMatch = term.match(/above\\s+(\\d+)/i);\r\n  const price = parseInt(underMatch?.[1] || aboveMatch?.[1]);\r\n  const condition = underMatch ? \"<=\" : \">=\";\r\n  const filteredWords = term\r\n    .replace(/under\\s+\\d+|above\\s+\\d+/gi, \"\")\r\n    .split(/\\s+/)\r\n    .filter(Boolean);\r\n\r\n  try {\r\n    if (!isNaN(price) && filteredWords.length) {\r\n      const snap = await getDocs(\r\n        query(collection(db, \"products\"), where(\"price\", condition, price))\r\n      );\r\n      snap.docs.forEach((doc) => {\r\n        const data = doc.data();\r\n        const title = data.title?.toLowerCase() || \"\";\r\n        const tags = (data.tags || []).map((t) => t.toLowerCase());\r\n        if (\r\n          filteredWords.some((w) => title.includes(w) || tags.includes(w))\r\n        ) {\r\n          map.set(doc.id, { id: doc.id, ...data });\r\n        }\r\n      });\r\n    } else {\r\n      // title search\r\n      const snap = await getDocs(\r\n        query(\r\n          collection(db, \"products\"),\r\n          where(\"title\", \">=\", term),\r\n          where(\"title\", \"<=\", term + \"\\uf8ff\")\r\n        )\r\n      );\r\n      snap.docs.forEach((doc) =>\r\n        map.set(doc.id, { id: doc.id, ...doc.data() })\r\n      );\r\n\r\n      // tag search\r\n      const tagSearches = term.split(/\\s+/).map((w) =>\r\n        getDocs(\r\n          query(collection(db, \"products\"), where(\"tags\", \"array-contains\", w))\r\n        )\r\n      );\r\n      const results = await Promise.all(tagSearches);\r\n      results.forEach((snap) => {\r\n        snap.docs.forEach((doc) =>\r\n          map.set(doc.id, { id: doc.id, ...doc.data() })\r\n        );\r\n      });\r\n\r\n      // exact price match\r\n      const exact = await getDocs(\r\n        query(collection(db, \"products\"), where(\"price\", \"==\", parseInt(term)))\r\n      );\r\n      exact.docs.forEach((doc) =>\r\n        map.set(doc.id, { id: doc.id, ...doc.data() })\r\n      );\r\n    }\r\n\r\n    return Array.from(map.values());\r\n  } catch (err) {\r\n    console.error(\"Search error\", err);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ðŸ”¹ Server Component Search Page\r\nexport default async function SearchPage({ searchParams }) {\r\n  const term = searchParams?.search || \"\";\r\n  const products = term ? await getProducts(term.toLowerCase()) : [];\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile filter toggle button */}\r\n      <div\r\n        className=\"mt-1 d-block d-md-none text-center\"\r\n        style={{ fontFamily: \"Jost Variable\" }}\r\n      >\r\n        <div className=\"btn btn-secondary px-3\">Filters</div>\r\n      </div>\r\n\r\n         <Suspense fallback={null}>\r\n        <Filters />\r\n      </Suspense>\r\n\r\n      <div className=\"container mt-3 px-1\">\r\n        <div className=\"row g-0 g-md-4\">\r\n          {products.length > 0 ? (\r\n            products.map((item) => (\r\n              <div className=\"col-6 col-md-3\" key={item.id}>\r\n                <Link\r\n                  href={`/product/${item.id}`}\r\n                  className=\"text-decoration-none\"\r\n                >\r\n                  <div\r\n                    className=\"card h-100 text-decoration-none rounded-0 border-0\"\r\n                    style={{ backgroundColor: \"#F7F7F7\" }}\r\n                  >\r\n                    <div className=\"position-relative\">\r\n                      <img\r\n                        src={\r\n                          Array.isArray(item.photo) ? item.photo[0] : item.photo\r\n                        }\r\n                        className=\"card-img-top\"\r\n                        alt={item.title}\r\n                      />\r\n                    </div>\r\n\r\n                    <div\r\n                      className=\"card-body mt-1 px-1\"\r\n                      style={{ fontFamily: \"Jost Variable\" }}\r\n                    >\r\n                      <h2\r\n                        className=\"card-title fw-normal text-dark text-start\"\r\n                        style={{ fontSize: \"22px\" }}\r\n                      >\r\n                        {item.title}\r\n                      </h2>\r\n                      <p\r\n                        className=\"card-text text-muted p-0 mb-0 text-start\"\r\n                        style={{ fontSize: \"12px\" }}\r\n                      >\r\n                        <span className=\"badge bg-success text-start\">\r\n                          Free delivery\r\n                        </span>{\" \"}\r\n                        on â‚¹599+\r\n                      </p>\r\n\r\n                      <ProductCardClient id={item.id} product={item} />\r\n                      <p className=\"fw-medium text-dark fs-6 mb-0 mt-2 ms-0 text-start\">\r\n                        Rs. {item.price}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"col-12 text-center fs-5\">\r\n              {term ? \"No products found.\" : \"Enter a search term.\"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1,2]}