{"version":3,"sources":["../../../../src/app/adminPanel/allProducts/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { db } from \"@/firebaseConfig\";\r\nimport { collection, getDocs, doc, updateDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"@/styles/allProducts.css\"\r\n\r\nconst AllProducts = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, \"products\"));\r\n        const productsArray = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setProducts(productsArray);\r\n      } catch (error) {\r\n        console.error(\"Error fetching products: \", error);\r\n      }\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const handleMakeDeal = async (productId, isDeal) => {\r\n    try {\r\n      const productRef = doc(db, \"products\", productId);\r\n      await updateDoc(productRef, { isDeal: !isDeal });\r\n      alert(\"Deal status updated.\");\r\n      setProducts((prev) =>\r\n        prev.map((product) =>\r\n          product.id === productId ? { ...product, isDeal: !isDeal } : product\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error updating deal status:\", error);\r\n    }\r\n  };\r\n\r\n  const handleMakeNewArrival = async (productId, isNewArrival) => {\r\n    try {\r\n      const productRef = doc(db, \"products\", productId);\r\n      await updateDoc(productRef, { isNewArrival: !isNewArrival });\r\n      alert(\"New arrival status updated.\");\r\n      setProducts((prev) =>\r\n        prev.map((product) =>\r\n          product.id === productId ? { ...product, isNewArrival: !isNewArrival } : product\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error updating new arrival:\", error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProduct = (productId) => {\r\n    router.push(`/admin/updateProduct/${productId}`);\r\n  };\r\n\r\n  const handleDeleteProduct = async (productId) => {\r\n    const confirmDelete = window.confirm(\"Are you sure you want to delete this product?\");\r\n    if (!confirmDelete) return;\r\n    try {\r\n      await deleteDoc(doc(db, \"products\", productId));\r\n      alert(\"Product Deleted\");\r\n      setProducts((prevProducts) =>\r\n        prevProducts.filter((product) => product.id !== productId)\r\n      );\r\n    } catch (error) {\r\n      console.error(\"Error deleting product: \", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2 className=\"text-center mb-4\">All Products</h2>\r\n      <div className=\"row\">\r\n        {products.length > 0 ? (\r\n          products.map((product) => (\r\n            <div key={product.id} className=\"col-lg-3 col-md-4 col-sm-6 mb-4\">\r\n              <div className=\"card h-100 position-relative shadow-sm\">\r\n                {product.isDeal && (\r\n                  <div className=\"deal-badge\">DEAL</div>\r\n                )}\r\n                <img\r\n                  src={product.photo}\r\n                  className=\"card-img-top\"\r\n                  alt={product.title}\r\n                  style={{ height: \"250px\", objectFit: \"cover\" }}\r\n                />\r\n                <div className=\"card-body d-flex flex-column\">\r\n                  <h5 className=\"card-title\">{product.title}</h5>\r\n                  <p className=\"mb-1\">\r\n                    <strong>Price:</strong> â‚¹{product.price}\r\n                  </p>\r\n                  <p className=\"mb-1\">\r\n                    <strong>Sizes:</strong> {product.sizes.join(\", \")}\r\n                  </p>\r\n                  <p className=\"mb-1\">\r\n                    <strong>Colors:</strong> {product.color.join(\", \")}\r\n                  </p>\r\n                  <p className=\"text-muted mb-2\">Category: {product.category}</p>\r\n\r\n                  <div className=\"dropdown mt-auto\">\r\n                    <button\r\n                      className=\"btn btn-outline-primary btn-sm dropdown-toggle w-100\"\r\n                      type=\"button\"\r\n                      id={`dropdownMenuButton-${product.id}`}\r\n                      data-bs-toggle=\"dropdown\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      Actions\r\n                    </button>\r\n                    <ul\r\n                      className=\"dropdown-menu w-100\"\r\n                      aria-labelledby={`dropdownMenuButton-${product.id}`}\r\n                    >\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item\"\r\n                          onClick={() => handleMakeDeal(product.id, product.isDeal)}\r\n                        >\r\n                          {product.isDeal ? \"Remove Deal\" : \"Mark as Deal\"}\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item\"\r\n                          onClick={() =>\r\n                            handleMakeNewArrival(product.id, product.isNewArrival)\r\n                          }\r\n                        >\r\n                          {product.isNewArrival ? \"Mark as Old\" : \"Mark as New Arrival\"}\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item\"\r\n                          onClick={() => handleUpdateProduct(product.id)}\r\n                        >\r\n                          Update Product\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item text-danger\"\r\n                          onClick={() => handleDeleteProduct(product.id)}\r\n                        >\r\n                          Delete Product\r\n                        </button>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-12 text-center\">\r\n            <p>Loading products...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllProducts;\r\n"],"names":[],"mappings":"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"}