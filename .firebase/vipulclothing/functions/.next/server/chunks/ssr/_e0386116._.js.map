{"version":3,"sources":["../../../../public/profileAvatar.jpg.mjs%20%28structured%20image%20object%20with%20data%20url%29","../../../../src/app/adminPanel/users/page.jsx"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 413, height: 458, blurWidth: 7, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAcDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD01Y9QEgkG/wA0sd2W+XH0oA//2Q==\"};\n","\"use client\";\r\n\r\n// import profileAvatar from \"@/assets/profileAvatar.jpg\";\r\nimport profileAvatar from \"@/../public/profileAvatar.jpg\"\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { auth, db } from \"@/firebaseConfig\";\r\nimport { collection, doc, getDoc, getDocs } from \"firebase/firestore\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst Users = () => {\r\n  const router = useRouter();\r\n  const [isAdmin, setIsAdmin] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [loadingUsers, setLoadingUsers] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkAdminAndFetchUsers = async () => {\r\n      const authInstance = getAuth();\r\n      onAuthStateChanged(authInstance, async (user) => {\r\n        if (!user) {\r\n          setIsAdmin(false);\r\n          router.push(\"/apLogin\");\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n          if (userDoc.exists() && userDoc.data().isAdmin) {\r\n            setIsAdmin(true);\r\n            await fetchUsers();\r\n          } else {\r\n            setIsAdmin(false);\r\n            router.push(\"/apLogin\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error checking admin:\", error);\r\n          setIsAdmin(false);\r\n        }\r\n      });\r\n    };\r\n\r\n    checkAdminAndFetchUsers();\r\n  }, [router]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const snapshot = await getDocs(collection(db, \"users\"));\r\n      const userList = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setUsers(userList);\r\n      console.log(userList);\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error);\r\n    } finally {\r\n      setLoadingUsers(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      {/* Sticky Header */}\r\n      <div\r\n        className=\"bg-white mt-5 px-2 position-sticky top-0\"\r\n        style={{ zIndex: 999 }}\r\n      >\r\n        <h2 className=\"text-center m-0\">Customers</h2>\r\n      </div>\r\n\r\n      {/* Loading State */}\r\n      {isAdmin === null || loadingUsers ? (\r\n        <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"row mt-3\">\r\n          {users.map((user, index) => (\r\n            <div key={index} className=\"col-md-2 mb-3\">\r\n              <div className=\"card p-3 shadow-sm h-100\">\r\n                <img\r\n                  src={\r\n                    user.profilePhotoUrl?.length > 4\r\n                      ? user.profilePhotoUrl\r\n                      : profileAvatar.src\r\n                  }\r\n                  className=\"img-fluid rounded-circle mx-auto d-block mb-2\"\r\n                  style={{\r\n                    height: \"100px\",\r\n                    width: \"100px\",\r\n                    objectFit: \"cover\",\r\n                  }}\r\n                  alt=\"User Avatar\"\r\n                />\r\n                <h6 className=\"text-center\">{user.name || \"Unnamed\"}</h6>\r\n                <p className=\"mb-1\">\r\n                  <strong>Email:</strong> {user.email}\r\n                </p>\r\n                <p className=\"mb-1\">\r\n                  <strong>Phone:</strong> {user.phone || \"-\"}\r\n                </p>\r\n                <p className=\"mb-1\">\r\n                  <strong>Pincode:</strong> {user.pincode || \"-\"}\r\n                </p>\r\n                <p className=\"mb-1\">\r\n                  <strong>Admin:</strong> {user.isAdmin ? \"Yes\" : \"No\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n"],"names":[],"mappings":"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"}