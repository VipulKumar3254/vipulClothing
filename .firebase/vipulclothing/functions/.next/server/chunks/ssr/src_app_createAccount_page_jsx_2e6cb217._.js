module.exports=[29676,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(20706);a.i(30485);var e=a.i(70896);a.i(69387);var f=a.i(60574);a.i(60121);var g=a.i(5420),h=a.i(6704),i=a.i(50944);function j(){let a=(0,i.useRouter)(),[j,k]=(0,c.useState)({}),[l,m]=(0,c.useState)({username:"",name:"",email:"",phone:"",address:"",pincode:"",password:"",confirmPassword:""}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(),[r,s]=(0,c.useState)(null),t=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))},u=async b=>{if(b.preventDefault(),o(!0),!(()=>{var a;let b,c,d,e,f,g={},{username:h,name:i,email:j,phone:m,address:n,pincode:o,password:p,confirmPassword:q}=l;h||(g.username="Username is required");let r=(a=h,(b=a?.trim())?b.split(/\s+/).length>1?{valid:!1,message:"Username must be a single word"}:/^[a-zA-Z0-9]+$/.test(b)?{valid:!0,message:""}:{valid:!1,message:"Only letters and numbers allowed"}:{valid:!1,message:"Username is required"});r.valid||(g.username=r.message),i||(g.name="Name is required"),j?(c=j,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||(g.email="Enter valid Email")):g.email="Email is required",m?(d=m,/^[6-9]\d{9}$/.test(d)||(g.phone="Enter valid Phone Number")):g.phone="Phone number is required",n?n.trim().split(/\s+/).length<4&&(g.address="At least 4 segments are required."):g.address="Address is required",o?(e=o,/^[1-9][0-9]{5}$/.test(e)||(g.pincode="Enter Valid Pincode.")):g.pincode="Pincode is required",p||(g.password="Password is required");let s=(f=p).length<8?"Password must be at least 8 characters":/[a-z]/.test(f)?/[A-Z]/.test(f)?/\d/.test(f)?/[!@#$%^&*]/.test(f)?"":"Must include a special character":"Must include a digit":"Must include an uppercase letter":"Must include a lowercase letter";return s&&(g.password=s),p!==q&&(g.confirmPassword="Passwords do not match"),k(g),0===Object.keys(g).length})())return void o(!1);try{let b=(await (0,e.createUserWithEmailAndPassword)(d.auth,l.email,l.password)).user,c="null";if(p){let a=(0,g.ref)(d.storage,`profile/${b.uid}`);await (0,g.uploadBytes)(a,p),c=await (0,g.getDownloadURL)(a)}let i=(0,f.doc)(d.db,"users",b.uid);await (0,f.setDoc)(i,{...l,profilePhotoUrl:c}),h.toast.success("Account created successfully!"),a.push("/login")}catch(a){console.error(a),"auth/email-already-in-use"===a.code?h.toast.error("Email already in use"):"auth/weak-password"===a.code?h.toast.error("Weak password"):h.toast.error("Something went wrong, try again")}finally{o(!1)}};return(0,b.jsxs)("div",{className:"container mt-5",children:[(0,b.jsx)("h2",{children:"Create Account"}),(0,b.jsxs)("form",{onSubmit:u,className:"p-4 bg-light border rounded",children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-9",children:[(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Username"}),(0,b.jsx)("input",{type:"text",className:`form-control ${j.username?"is-invalid":""}`,name:"username",value:l.username,onChange:t}),j.username&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.username})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Name"}),(0,b.jsx)("input",{type:"text",className:`form-control ${j.name?"is-invalid":""}`,name:"name",value:l.name,onChange:t}),j.name&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.name})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Email"}),(0,b.jsx)("input",{type:"email",className:`form-control ${j.email?"is-invalid":""}`,name:"email",value:l.email,onChange:t}),j.email&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.email})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Phone"}),(0,b.jsx)("input",{type:"text",className:`form-control ${j.phone?"is-invalid":""}`,name:"phone",value:l.phone,onChange:t}),j.phone&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.phone})]})]}),(0,b.jsxs)("div",{className:"col-3 p-0",children:[(0,b.jsx)("input",{onChange:a=>{let b=a.target.files[0];b&&(q(b),s(URL.createObjectURL(b)))},accept:"image/*",className:"d-none",type:"file",id:"photo"}),(0,b.jsxs)("label",{htmlFor:"photo",className:"border border-secondary-subtle d-block text-center",children:[(0,b.jsx)("img",{src:r||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Preview",className:"img-fluid"}),(0,b.jsx)("p",{className:"text-dark mt-1",children:"Choose profile photo"})]})]})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Address"}),(0,b.jsx)("input",{type:"text",className:`form-control ${j.address?"is-invalid":""}`,name:"address",value:l.address,onChange:t}),j.address&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.address})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Pincode"}),(0,b.jsx)("input",{type:"text",className:`form-control ${j.pincode?"is-invalid":""}`,name:"pincode",value:l.pincode,onChange:t}),j.pincode&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.pincode})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Password"}),(0,b.jsx)("input",{type:"password",className:`form-control ${j.password?"is-invalid":""}`,name:"password",value:l.password,onChange:t}),j.password&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.password})]}),(0,b.jsxs)("div",{className:"form-group mb-3",children:[(0,b.jsx)("label",{children:"Confirm Password"}),(0,b.jsx)("input",{type:"password",className:`form-control ${j.confirmPassword?"is-invalid":""}`,name:"confirmPassword",value:l.confirmPassword,onChange:t}),j.confirmPassword&&(0,b.jsx)("div",{className:"invalid-feedback",children:j.confirmPassword})]}),(0,b.jsx)("button",{disabled:n,type:"submit",className:"btn btn-primary w-100",children:n?"Processing...":"Create Account"})]}),(0,b.jsx)(h.Toaster,{position:"bottom-left"})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_createAccount_page_jsx_2e6cb217._.js.map