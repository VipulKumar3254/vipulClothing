{"version":3,"sources":["../../../../src/app/profile/page.jsx","../../../../node_modules/react-bootstrap/esm/Spinner.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport \"@fontsource-variable/jost\";\r\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nimport { db } from \"@/firebaseConfig\";\r\n\r\nimport Cart from \"@/components/basic/cart\";\r\nimport \"@/styles/profile.css\";\r\n\r\nconst tempProfileImg =\r\n  \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png\";\r\n\r\nexport default function Profile() {\r\n  const [user, setUser] = useState(null);\r\n  const [profilePhotoUrl, setProfilePhotoUrl] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCart, setShowCart] = useState(true);\r\n\r\n  const cartReference = useRef(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsub = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        try {\r\n          const userRef = doc(db, \"users\", firebaseUser.uid);\r\n          const userSnap = await getDoc(userRef);\r\n          if (userSnap.exists()) {\r\n            setUser(userSnap.data());\r\n            setProfilePhotoUrl(userSnap.data().profilePhotoUrl || \"\");\r\n          } else {\r\n            console.error(\"User doc not found\");\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Error fetching user:\", e);\r\n        }\r\n      } else {\r\n        setUser(null);\r\n        router.push(\"/login\");\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [router]);\r\n\r\n  const logout = async () => {\r\n    const auth = getAuth();\r\n    try {\r\n      await signOut(auth);\r\n      router.refresh();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const toggleCart = () => {\r\n    if (cartReference.current) {\r\n      cartReference.current.classList.toggle(\"slide-in\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: \"400px\" }}>\r\n        <Spinner animation=\"border\" variant=\"primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div style={{ minHeight: \"400px\" }}>\r\n        <p className=\"text-center fs-5\">Please login to continue</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-5\" style={{ fontFamily: \"Jost Variable\" }}>\r\n      {/* Mobile profile image */}\r\n      <div className=\"col-md-12 text-center d-md-none mt-1 bg-dark\">\r\n        <div className=\"profile-img-wrapper mx-auto\">\r\n          <div className=\"profile-ring-wrapper mx-auto py-2\">\r\n            <img\r\n              className=\"profile-image\"\r\n              src={profilePhotoUrl || tempProfileImg}\r\n              alt=\"profile\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <h4 className=\"text-white text-top m-0 fs-4 fw-normal\">Hi, {user?.name ?? \"there\"}</h4>\r\n      </div>\r\n\r\n      <div className=\"container mt-3\">\r\n        <div className=\"row justify-content-center\">\r\n          {/* Orders */}\r\n          <div className=\"col-lg-3 col-md-6 col-12 card-profile-section m-2 text-center\">\r\n            <div className=\"row align-items-center justify-content-start\">\r\n              <div className=\"col-2 text-center\">\r\n                <i className=\"bi bi-box-seam fs-4 fs-md-1\"></i>\r\n              </div>\r\n              <Link\r\n                href=\"/orders\"\r\n                className=\"col-10 text-decoration-none text-black fs-4 d-flex align-items-center justify-content-between\"\r\n              >\r\n                <span>Orders</span>\r\n                <i className=\"bi bi-chevron-right fs-6 d-md-none\"></i>\r\n              </Link>\r\n            </div>\r\n            <p className=\"d-none d-md-block\">Track, return, or buy something else</p>\r\n          </div>\r\n\r\n          {/* Wishlist */}\r\n          <div className=\"col-lg-3 col-md-6 col-12 card-profile-section m-2 text-center\">\r\n            <div className=\"row align-items-center justify-content-start\">\r\n              <div className=\"col-2 text-center\">\r\n                <i className=\"bi bi-heart fs-4 fs-md-1\"></i>\r\n              </div>\r\n              <Link\r\n                href=\"/wishList\"\r\n                className=\"col-10 text-decoration-none text-black fs-4 d-flex align-items-center justify-content-between\"\r\n              >\r\n                <span>WishList</span>\r\n                <i className=\"bi bi-chevron-right fs-6 d-md-none\"></i>\r\n              </Link>\r\n            </div>\r\n            <p className=\"d-none d-md-block\">Save items for later for convenience</p>\r\n          </div>\r\n\r\n          {/* Contact */}\r\n          <div className=\"col-lg-3 col-md-6 col-12 card-profile-section m-2 text-center\">\r\n            <div className=\"row align-items-center justify-content-start\">\r\n              <div className=\"col-2 text-center\">\r\n                <i className=\"bi bi-envelope fs-4 fs-md-1 d-md-none\"></i>\r\n              </div>\r\n              <Link\r\n                href=\"/contact\"\r\n                className=\"col-10 text-decoration-none text-black fs-4 d-flex align-items-center justify-content-between\"\r\n              >\r\n                <span>Contact Us</span>\r\n                <i className=\"bi bi-chevron-right fs-6 d-md-none\"></i>\r\n              </Link>\r\n            </div>\r\n            <p className=\"d-none d-md-block\">Need help? Don&apos;t worry, we are here</p>\r\n          </div>\r\n\r\n          {/* Cart */}\r\n          <div\r\n            className=\"col-lg-3 col-md-6 col-12 card-profile-section m-2 text-center\"\r\n            onClick={toggleCart}\r\n          >\r\n            <div className=\"row align-items-center justify-content-start\">\r\n              <div className=\"col-2 text-center\">\r\n                <i className=\"bi bi-cart fs-4 fs-md-1\"></i>\r\n              </div>\r\n              <span className=\"col-10 text-black fs-4 d-flex align-items-center justify-content-between\">\r\n                <span>Cart</span>\r\n                <i className=\"bi bi-chevron-right fs-6 d-md-none\"></i>\r\n              </span>\r\n            </div>\r\n            <p className=\"d-none d-md-block\">Come on! Order, we are waiting</p>\r\n          </div>\r\n\r\n          {/* Logout */}\r\n          <div\r\n            className=\"col-lg-3 col-md-6 col-12 card-profile-section m-2 text-center\"\r\n            onClick={logout}\r\n            role=\"button\"\r\n          >\r\n            <div className=\"row align-items-center justify-content-start\">\r\n              <div className=\"col-2 text-center\">\r\n                <i className=\"bi bi-box-arrow-right fs-4 fs-md-1\"></i>\r\n              </div>\r\n              <span className=\"col-10 text-black fs-4 d-flex align-items-center justify-content-between\">\r\n                <span>Log Out</span>\r\n                <i className=\"bi bi-chevron-right fs-6 d-md-none\"></i>\r\n              </span>\r\n            </div>\r\n            <p className=\"d-none d-md-block\">See you soon, have a nice day</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Slide-in cart */}\r\n      <div ref={cartReference} className=\"cart-container\">\r\n        {showCart && <Cart toggleCart={toggleCart} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Spinner = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  variant,\n  animation = 'border',\n  size,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  className,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'spinner');\n  const bsSpinnerPrefix = `${bsPrefix}-${animation}`;\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, bsSpinnerPrefix, size && `${bsSpinnerPrefix}-${size}`, variant && `text-${variant}`)\n  });\n});\nSpinner.displayName = 'Spinner';\nexport default Spinner;"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCDA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,MAEA,IAAM,EAAuB,EAAA,MAAb,IAA6B,CAAC,CAAC,KAApB,KACzB,CAAQ,SACR,CAAO,WACP,EAAY,QAAQ,MACpB,CAAI,CAEJ,CADA,EACI,EAAY,KAAK,WACrB,CAAS,CACT,GAAG,EACJ,CAAE,KACD,EAAW,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAU,WACxC,IAAM,EAAkB,CAAA,EAAG,EAAS,CAAC,EAAE,EAAA,CAAW,CAClD,MAAoB,CAAb,AAAa,EAAA,EAAA,GAAA,AAAI,EAAC,EAAP,AAAkB,CAClC,IAAK,EACL,GAAG,CAAK,CACR,UAAW,CAAA,EAAA,EAAA,OAAA,AAAU,EAAC,EAAW,EAAiB,GAAQ,CAAA,EAAG,AAV4F,EAU5E,CAAC,EAAE,EAAA,CAAM,CAAE,GAAW,CAAC,KAAK,EAAE,EAAA,CAAS,CACtH,EACF,GACA,EAAQ,WAAW,CAAG,UDhBtB,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAMe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MAC3B,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEnC,EAAgB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,MACvB,EAAS,CAAA,EAAA,EAAA,SAAS,AAAT,IAEf,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,IACd,EAAQ,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAM,MAAO,IAC5C,GAAI,EACF,GAAI,CACF,IAAM,EAAU,CAAA,CAFF,CAEE,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,QAAS,EAAa,GAAG,EAC3C,EAAW,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,GAC1B,EAAS,MAAM,IAAI,AACrB,EAAQ,EAAS,IAAI,IACrB,EAAmB,EAAS,IAAI,GAAG,eAAe,EAAI,KAEtD,QAAQ,KAAK,CAAC,qBAElB,CAAE,MAAO,EAAG,CACV,QAAQ,KAAK,CAAC,uBAAwB,EACxC,MAEA,EAAQ,MACR,EAAO,IAAI,CAAC,UAEd,GAAW,EACb,GAEA,MAAO,IAAM,GACf,EAAG,CAAC,EAAO,EAEX,IAAM,EAAS,UACb,IAAM,EAAO,CAAA,EAAA,EAAA,OAAO,AAAP,IACb,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,GACd,EAAO,OAAO,EAChB,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAEM,EAAa,KACb,EAAc,OAAO,EAAE,AACzB,EAAc,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,WAE3C,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,CAET,EAAC,MAAA,CAAI,UAAU,mDAAmD,MAAO,CAAE,UAAW,OAAQ,WAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,ACjDM,EDiDN,CAAQ,UAAU,SAAS,QAAQ,cAKrC,EASH,CAAA,EAAA,CATS,CAST,IAAA,EAAC,MAAA,CAAI,UAAU,OAAO,MAAO,CAAE,WAAY,eAAgB,YAEzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,gBACV,IAAK,GA7EjB,gBA6EoC,uEACxB,IAAI,gBAIV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,mDAAyC,OAAK,GAAM,MAAQ,cAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAEf,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,UACL,UAAU,0GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,WACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,4CAInC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAEf,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,YACL,UAAU,0GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,aACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,4CAInC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAEf,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,WACL,UAAU,0GAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,eACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,2CAInC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAU,gEACV,QAAS,YAET,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAEf,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qFACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,SACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,sCAInC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAU,gEACV,QAAS,EACT,KAAK,mBAEL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAEf,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qFACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,YACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAGjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6BAAoB,0CAMvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAe,UAAU,0BAChC,GAAY,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,WAAY,SAlHjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,UAAW,OAAQ,WAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4BAAmB,8BAqHxC","ignoreList":[1]}