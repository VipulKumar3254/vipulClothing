module.exports=[3718,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(30485);var d=a.i(70896);a.i(69387);var e=a.i(60574),f=a.i(20706),g=a.i(50944),h=a.i(6704),i=a.i(71987);let j={src:a.i(35590).default,width:890,height:980,blurWidth:7,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA80lEQVR42gHoABf/ANLS0i1iYmKeuLi4SNTU1Cvq6uoV/f39Av///wAAT09PsggICPceHh7iIiIi3jc3N8mNjY1z7OzsEwDNzc0zZmZmmq+vr1GwsLBQdnZ2iikpKddmZmaaAPz8/ATW1tYqra2tU8bGxjrw8PAQxMTEPDIyMs8Aw8PDPmJiYp8iIiLeODg4yJCQkHHr6+sVb29vkgBYWFioKioq1mpqaphJSUm4Kioq1ra2tkqamppnAFBQULAAAAD/RkZGuxkZGecSEhLtv7+/Qe/v7xEAs7OzTUtLS7VTU1OvOjo6xnx8fITs7OwT////AFQNclOefIh5AAAAAElFTkSuQmCC"},k={src:a.i(85652).default,width:300,height:234,blurWidth:8,blurHeight:6,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAA0UlEQVR42gHGADn/AEdwTABHcEwARm5LA0ZuSwQ9YEEgGCYamz1gQR9HcEwAAENpRwo6XD8hHzEhiRwsHpQZJxucHS4fizVTOTdFbEkIADtdPyAwTDNDChAL1QQGBOgJDwrUKUAsYiI2JHg/ZEQYAEFnRg44WTwoHzEhgQUIBtcQGhG1HjAgiB8wIYc2VTk5ADhZPCItRzBJDhYPxAkOCdoaKRyXHzEhhA8XEMMZJxqaAEVtSgVAZUUTIjYldyY9KWc7XT8mPWFCHyQ5JnEjNyZxEsculdVrZl4AAAAASUVORK5CYII="},l={src:a.i(42950).default,width:580,height:386,blurWidth:8,blurHeight:5,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAdklEQVR42mWLPQ5AMABGidFmMJssDiISZyEWN5DgGo6hggtwgi7tRqpLu/VHKukgHd43vLzP01p7BsZYfF9XJqUMrDN8o5Tyz+MoFgBaQkgshAicACGU7OuWN1U9YYyTX2CBEKZjP3RgnktzcgIjOechfWhk3QtglHLkm6W66gAAAABJRU5ErkJggg=="};function m({product:a}){let[m,n]=(0,c.useState)({}),[o,p]=(0,c.useState)(0),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),w=(0,g.useRouter)();(0,c.useEffect)(()=>{let a=(0,d.getAuth)();(0,d.onAuthStateChanged)(a,a=>t(a||null))},[]);let x=a=>{let{name:b,value:c}=a.target;n({...m,[b]:c}),"color"===b&&r(c)},y=()=>({...m,title:a.title,price:a.price,photo:a.photo,productId:a.id,userId:s?.uid}),z=async()=>{if(!s)return h.default.error("Please login to continue");if(!m.size||!m.color)return h.default.error("Please choose size and color");let b=y(),c=(0,e.doc)(f.db,`users/${s.uid}/cart`,a.id),d=await (0,e.getDoc)(c);if(d.exists()&&d.data().size===b.size&&d.data().color===b.color)return h.default.error("Already in cart");await (0,e.setDoc)(c,b),h.default.success("Added to cart")};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"container-fluid",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-xl-5",children:[(0,b.jsx)("div",{className:"d-flex flex-row",children:a.photo.map((a,c)=>(0,b.jsx)("div",{className:"mt-2 ms-1",children:(0,b.jsx)(i.default,{src:a,alt:"Product Thumbnail",width:35,height:50,onClick:()=>p(c),className:"border rounded"})},c))}),(0,b.jsx)(i.default,{className:"productImg mx-auto d-block",src:a.photo[o],width:500,height:500,alt:"Product"})]}),(0,b.jsxs)("div",{className:"col-lg-7",style:{fontFamily:"Jost Variable"},children:[(0,b.jsx)("h2",{className:"fs-2 mt-5 ms-2 fw-normal",children:a.title}),(0,b.jsx)("p",{className:" d-none d-md-block fs-5 ms-2 pe-5",children:a.subTitle}),(0,b.jsxs)("p",{className:"fs-3 ms-2 fw-medium",children:[(0,b.jsx)("sup",{children:"₹"}),a.price]}),(0,b.jsxs)("div",{className:"mt-3 text-center d-flex",style:{fontFamily:"Jost Variable"},children:[(0,b.jsxs)("div",{className:"m-2 mx-3",children:[(0,b.jsx)(i.default,{height:30,style:{height:"30px"},src:j,alt:"Return Policy"}),(0,b.jsx)("p",{style:{fontSize:"12px"},children:"10 Day Return"})]}),(0,b.jsxs)("div",{className:"m-2 mx-3",children:[(0,b.jsx)(i.default,{style:{height:"30px"},height:30,src:k,alt:"Home Delivery"}),(0,b.jsx)("p",{style:{fontSize:"12px"},children:"Fast Delivery"})]}),(0,b.jsxs)("div",{className:"m-2 mx-3",children:[(0,b.jsx)(i.default,{syle:{height:"30px"},height:30,src:l,alt:"COD Available"}),(0,b.jsx)("p",{style:{fontSize:"12px"},children:"Cash on Delivery"})]})]}),(0,b.jsx)("p",{style:{fontFamily:"Jost Variable"},className:"mt-1 fs-6",children:"Size"}),(0,b.jsxs)("select",{style:{fontFamily:"Jost Variable"},className:"border rounded",name:"size",onChange:x,children:[(0,b.jsx)("option",{value:"",children:"Select"}),a.sizes?.map((a,c)=>(0,b.jsx)("option",{value:a,children:a},c))]}),(0,b.jsx)("p",{style:{fontFamily:"Jost Variable"},className:"mt-3 fs-6",children:"Color"}),(0,b.jsx)("div",{children:a.color?.map((c,d)=>(0,b.jsxs)("div",{className:"d-inline text-center ms-2",children:[(0,b.jsx)("input",{type:"radio",name:"color",className:"d-none",onChange:a=>{x(a),p(d)},value:c,id:c}),(0,b.jsxs)("label",{htmlFor:c,children:[(0,b.jsx)("img",{src:a.photo[d],style:{height:"80px",width:"60px",objectFit:"cover"},className:` ms-2 ${q==c?"highlighedImage":""}`,alt:c}),(0,b.jsx)("p",{children:c})]})]},d))}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("button",{className:"col-lg-2 btn btn-warning rounded-0 py-2",onClick:z,children:"Add to Cart"}),(0,b.jsx)("button",{className:"col-lg-2 btn btn-success rounded-0 ms-0 py-2 mt-2 ms-md-2 mt-md-0",onClick:()=>{let a;return s?m.size&&m.color?void(a=y(),sessionStorage.setItem("buyNow",JSON.stringify(a)),w.push("/checkout?mode=buy-now")):h.default.error("Choose size and color"):h.default.error("Please login to continue")},children:"Buy Now"})]})]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{fontFamily:"Jost Variable"},className:"mt-5 fs-1 fw-normal text-center",children:"Product Description"}),(0,b.jsx)("div",{className:"container row  mx-auto mt-5 ",children:(0,b.jsx)("div",{className:"col-12  ",children:a.desc.map((a,c)=>(0,b.jsxs)("div",{className:"mb-3 ",style:{fontFamily:"Jost Variable"},children:[(0,b.jsx)("h4",{style:{fontWeight:"400"},children:a.title}),(0,b.jsx)("p",{className:"fs-6",children:a.desc})]},c))})})]})]})}let n=({product:a})=>{let[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),p=(0,g.useRouter)();(0,c.useEffect)(()=>{if(!a?.id)return;let b=(0,e.collection)(f.db,"products",a.id,"reviews"),c=(0,e.query)(b,(0,e.orderBy)("createdAt","desc")),d=(0,e.onSnapshot)(c,a=>{m(a.docs.map(a=>({id:a.id,...a.data()}))),i(!1)});return()=>d()},[a?.id]),(0,c.useEffect)(()=>{let a=(0,d.getAuth)();(0,d.onAuthStateChanged)(a,async a=>{if(a)try{let b=(0,e.doc)(f.db,"users",a.uid),c=await (0,e.getDoc)(b);c.exists()?k({...c.data(),uid:a.uid}):alert("Please try again later")}catch(a){console.error("Error fetching user data:",a)}else console.log("Not logged in"),k(null)})},[]);let q=async()=>{if(n.trim()){if(!j){alert("You must be logged in to comment"),p.push("/login");return}try{let b={text:n,createdAt:(0,e.serverTimestamp)(),userId:j.uid,userName:j.name||"Anonymous"},c=await (0,e.addDoc)((0,e.collection)(f.db,"products",a.id,"reviews"),b);await (0,e.setDoc)((0,e.doc)(f.db,"recentReviews",c.id),{productId:a.id,reviewId:c.id,createdAt:(0,e.serverTimestamp)()}),o("")}catch(a){console.error("Error posting comment:",a)}}};return(0,b.jsxs)("div",{style:{minHeight:"400px",fontFamily:"Jost Variable"},className:"container p-3 mt-4",children:[(0,b.jsx)("hr",{}),(0,b.jsx)("h4",{children:"Reviews"}),(0,b.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,b.jsx)("input",{style:{fontFamily:"Jost Variable"},type:"text",className:"form-control rounded-0",value:n,onChange:a=>o(a.target.value),placeholder:"Write a Review..."}),(0,b.jsx)("button",{style:{fontFamily:"Jost Variable"},onClick:q,className:"btn btn-primary rounded-0",children:"Post"})]}),(0,b.jsx)("ul",{className:"list-group",children:h?[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("li",{className:"list-group-item",children:(0,b.jsx)("div",{className:"skeleton skeleton-comment"})},c)):l.length>0?l.map(a=>(0,b.jsxs)("li",{className:"list-group-item border-0",children:[(0,b.jsxs)("strong",{children:[a.userName,": "]})," ",a.text]},a.id)):(0,b.jsx)("li",{className:"list-group-item text-muted",children:"No Reviews yet."})})]})};var o=a.i(38246);let p=({product:a})=>{let[g,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=(0,d.getAuth)(),b=(0,d.onAuthStateChanged)(a,a=>{m(a||null)});return()=>b()},[]),(0,c.useEffect)(()=>{(async()=>{if(a?.price&&a?.category){try{let b=.8*a.price,c=1.2*a.price,d=(0,e.query)((0,e.collection)(f.db,"products"),(0,e.where)("category","==",a.category),(0,e.where)("price",">=",b),(0,e.where)("price","<=",c)),g=(await (0,e.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()})).filter(b=>b.id!==a.id);i(g)}catch(a){console.error("Error fetching related products:",a)}k(!1)}})()},[a]);let n=async(a,b)=>{if(a.preventDefault(),a.stopPropagation(),!l)return void h.default.error("Please login to add items to wishlist",{duration:3e3});try{let a={title:b.title,price:b.price,photo:b.photo,productId:b.id,userId:l.uid};await (0,e.setDoc)((0,e.doc)(f.db,`users/${l.uid}/wishList`,b.id),a),h.default.success("Added to Wishlist",{duration:3e3})}catch(a){console.error(a),h.default.error("Something went wrong",{duration:3e3})}};return j?(0,b.jsxs)("div",{style:{minHeight:"400px"},className:"mt-5 p-2",children:[(0,b.jsx)("h4",{style:{fontFamily:"Jost Variable"},className:"mb-3",children:"More Like This"}),(0,b.jsx)("div",{className:"d-flex overflow-auto pb-2",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"me-3",children:[(0,b.jsx)("div",{className:"skeleton skeleton-card"}),(0,b.jsx)("div",{className:"skeleton skeleton-title"}),(0,b.jsx)("div",{className:"skeleton skeleton-price"})]},c))})]}):(0,b.jsxs)("div",{style:{minHeight:"400px"},className:"mt-5 px-1",children:[(0,b.jsx)("h4",{style:{fontFamily:"Jost Variable"},className:"mb-3",children:"More Like This"}),g.length>0?(0,b.jsx)("div",{className:"d-flex overflow-auto pb-2",children:g.map(a=>(0,b.jsx)(o.default,{href:`/product/${a.id}`,className:"text-decoration-none text-dark",children:(0,b.jsxs)("div",{className:"card me-3 shadow-sm border-0",children:[(0,b.jsx)("div",{style:{height:"350px",overflow:"hidden",borderRadius:"8px"},children:(0,b.jsx)("img",{src:a.photo,className:"img-fluid w-100 h-100",alt:a.title,style:{objectFit:"cover",borderRadius:"8px"}})}),(0,b.jsxs)("div",{className:"card-body p-2",children:[(0,b.jsx)("h6",{style:{fontFamily:"Jost Variable",fontSize:"0.9rem"},className:"card-title mb-1 fw-normal",children:a.title}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("p",{style:{backgroundColor:"#FFCE12"},className:"d-inline px-3 py-1 border rounded-5 cursor-pointer",onClick:b=>n(b,a),children:"Add to Wishlist"})}),(0,b.jsxs)("p",{style:{fontFamily:"Jost Variable",fontSize:"1.1rem"},className:"card-text fw-medium text-muted mb-0 mt-2 price",children:["₹",a.price]})]})]},a.id)}))}):(0,b.jsx)("p",{style:{fontFamily:"Jost Variable"},className:"text-center",children:"No similar products found."}),(0,b.jsx)(h.Toaster,{position:"bottom-left"})]})};function q({id:a}){let[d,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0);return(console.log("ok bro",a),(0,c.useEffect)(()=>{fetch(`/api/product/${a}`).then(a=>a.json()).then(a=>{e(a),g(!1)}).catch(()=>g(!1))},[a]),f)?(0,b.jsx)("div",{className:"mt-5 text-center",children:"Loading…"}):d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{product:d}),(0,b.jsx)(n,{product:d}),(0,b.jsx)(p,{product:d})]}):(0,b.jsx)("div",{className:"mt-5 text-center",children:"Product not found"})}a.s(["default",()=>q],3718)}];

//# sourceMappingURL=src_app_product_%5Bid%5D_ProductPageClient_jsx_eb7ebb16._.js.map