{"version":3,"sources":["turbopack:///[project]/src/styles/productDisplay.module.css [app-ssr] (css module)","../../../../src/app/allDeals/page.jsx"],"sourcesContent":["__turbopack_context__.v({\n  \"card-img-top\": \"productDisplay-module__JHwf4q__card-img-top\",\n  \"fwMedium\": \"productDisplay-module__JHwf4q__fwMedium\",\n  \"gridMaker\": \"productDisplay-module__JHwf4q__gridMaker\",\n  \"imgContainer\": \"productDisplay-module__JHwf4q__imgContainer\",\n  \"noProducts\": \"productDisplay-module__JHwf4q__noProducts\",\n  \"placeholder-card\": \"productDisplay-module__JHwf4q__placeholder-card\",\n  \"placeholder-img\": \"productDisplay-module__JHwf4q__placeholder-img\",\n  \"placeholder-text\": \"productDisplay-module__JHwf4q__placeholder-text\",\n  \"productImg\": \"productDisplay-module__JHwf4q__productImg\",\n  \"pulse\": \"productDisplay-module__JHwf4q__pulse\",\n  \"short\": \"productDisplay-module__JHwf4q__short\",\n  \"textBlack\": \"productDisplay-module__JHwf4q__textBlack\",\n  \"title\": \"productDisplay-module__JHwf4q__title\",\n  \"toaster\": \"productDisplay-module__JHwf4q__toaster\",\n  \"wishList\": \"productDisplay-module__JHwf4q__wishList\",\n  \"wishlist-hover\": \"productDisplay-module__JHwf4q__wishlist-hover\",\n});\n","\"use client\";\r\n\r\nimport \"@fontsource-variable/jost\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"@/firebaseConfig\";\r\nimport { collection, getDocs, query, where, doc, setDoc } from \"firebase/firestore\";\r\nimport Link from \"next/link\";\r\nimport \"@/styles/productDisplay.module.css\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { toast, Toaster } from \"react-hot-toast\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function AllDeals() {\r\n  const [deals, setDeals] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Track logged-in user\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsub = onAuthStateChanged(auth, (usr) => setUser(usr || null));\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchDeals = async () => {\r\n      try {\r\n        const q = query(collection(db, \"products\"), where(\"isDeal\", \"==\", true));\r\n        const querySnapshot = await getDocs(q);\r\n        const dealsArray = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setDeals(dealsArray);\r\n      } catch (error) {\r\n        console.error(\"Error fetching deals: \", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDeals();\r\n  }, []);\r\n\r\n  const handleWishList = async (e, product) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const wishListItem = {\r\n      title: product.title,\r\n      price: product.price,\r\n      photo: product.photo,\r\n      productId: product.id,\r\n      userId: user?.uid,\r\n    };\r\n\r\n    try {\r\n      if (!user) throw new Error(\"User not logged in\");\r\n\r\n      await setDoc(doc(db, `users/${user.uid}/wishList`, product.id), wishListItem);\r\n\r\n      toast.custom(\r\n        (t) => (\r\n          <div\r\n            className=\"toaster bg-success text-white px-5 py-2 shadow-sm d-flex justify-content-between align-items-center\"\r\n            style={{ fontFamily: \"Jost Variable\", fontSize: \"12px\" }}\r\n          >\r\n            <span className=\"text-center\">Added to WishList</span>\r\n            <button\r\n              className=\"btn btn-sm btn-light ms-3\"\r\n              onClick={() => toast.dismiss(t.id)}\r\n              style={{ fontSize: \"12px\" }}\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        ),\r\n        { duration: 4000 }\r\n      );\r\n    } catch (err) {\r\n      const message =\r\n        err.message === \"User not logged in\"\r\n          ? \"Please login to add items to wishlist\"\r\n          : \"Something went wrong\";\r\n\r\n      toast.custom(\r\n        (t) => (\r\n          <div\r\n            className=\"toaster bg-danger text-white px-5 py-2 shadow-sm d-flex justify-content-between align-items-center\"\r\n            style={{ fontFamily: \"Jost Variable\", fontSize: \"12px\" }}\r\n          >\r\n            <span>{message}</span>\r\n            <button\r\n              className=\"btn btn-sm btn-light ms-3\"\r\n              onClick={() => toast.dismiss(t.id)}\r\n              style={{ fontSize: \"12px\" }}\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        ),\r\n        { duration: 4000 }\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-3 px-1\" style={{ fontFamily: \"Jost Variable\" }}>\r\n      <h2 className=\"text-center mb-4 fw-normal fs-2\">ðŸ”¥ Hot Deals ðŸ”¥</h2>\r\n\r\n      {loading ? (\r\n        <div className=\"row g-3\">\r\n          {Array.from({ length: 8 }).map((_, i) => (\r\n            <div className=\"col-6 col-md-3\" key={i}>\r\n              <div\r\n                className=\"card placeholder-card h-100 border-0 rounded-0\"\r\n                style={{ backgroundColor: \"#f0f0f0\" }}\r\n              >\r\n                <div className=\"placeholder-img w-100\"></div>\r\n                <div className=\"card-body px-2 py-2\">\r\n                  <div className=\"placeholder-text mb-2\"></div>\r\n                  <div className=\"placeholder-text short\"></div>\r\n                  <div\r\n                    className=\"placeholder-text short mt-2\"\r\n                    style={{ width: \"40%\" }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : deals.length === 0 ? (\r\n        <p className=\"text-center fs-5\">No deals available right now.</p>\r\n      ) : (\r\n        <div className=\"row g-0 g-md-4\">\r\n          {deals.map((item) => (\r\n            <div className=\"col-6 col-md-3\" key={item.id}>\r\n              <Link\r\n                href={`/product/${item.id}`}\r\n                className=\"card h-100 text-decoration-none rounded-0 border-0\"\r\n                style={{ backgroundColor: \"#F7F7F7\" }}\r\n              >\r\n                <div className=\"position-relative\">\r\n                  <Image\r\n                    src={Array.isArray(item.photo) ? item.photo[0] : item.photo}\r\n                    alt={item.title}\r\n                    className=\"card-img-top\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"card-body mt-1 px-1\">\r\n                  <h5 className=\"card-title fw-normal text-dark\">{item.title}</h5>\r\n                  <p\r\n                    className=\"card-text text-muted p-0 mb-0\"\r\n                    style={{ fontSize: \"12px\" }}\r\n                  >\r\n                    <span className=\"badge bg-success text-start\">Free delivery</span>{\" \"}\r\n                    on â‚¹599+\r\n                  </p>\r\n                  <div className=\"mt-2\">\r\n                    <p\r\n                      style={{ backgroundColor: \"#FFCE12\", fontSize: \"11px\" }}\r\n                      className=\"d-inline px-3 py-1 border rounded-5 cursor-pointer\"\r\n                      onClick={(e) => handleWishList(e, item)}\r\n                    >\r\n                      Add to Wishlist\r\n                    </p>\r\n                  </div>\r\n                  <p className=\"fw-medium text-dark fs-6 mb-0 mt-2 ms-0\">\r\n                    Rs. {item.price}\r\n                  </p>\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <Toaster position=\"bottom-left\" />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}