{"version":3,"sources":["../../../../src/app/adminPanel/productsWeOffer/add/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { db, storage } from \"@/firebaseConfig\"; // adjust path\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nexport default function AddProductsWeOffer() {\r\n  const [product, setProduct] = useState({\r\n    imgSrc: null,\r\n    name: \"\",\r\n    path: \"\",\r\n  });\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setProduct({ ...product, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setProduct({ ...product, imgSrc: file });\r\n      setImagePreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!product.imgSrc) {\r\n        alert(\"Please select an image!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Unique file name\r\n      const uniqueFileName = `${Date.now()}-${product.imgSrc.name}`;\r\n\r\n      // Upload image to Firebase Storage\r\n      const storageRef = ref(storage, `productsWeOffer/${uniqueFileName}`);\r\n      await uploadBytes(storageRef, product.imgSrc);\r\n\r\n      // Get uploaded image URL\r\n      const imageUrl = await getDownloadURL(storageRef);\r\n\r\n      // Save product in Firestore\r\n      await addDoc(\r\n        collection(db, \"admin\", \"productsWeOffer\", \"products\"),\r\n        {\r\n          imgSrc: imageUrl,\r\n          name: product.name,\r\n          path: product.path,\r\n        }\r\n      );\r\n\r\n      alert(\"Product added successfully!\");\r\n      setProduct({ imgSrc: null, name: \"\", path: \"\" });\r\n      setImagePreview(null);\r\n    } catch (error) {\r\n      console.error(\"Error adding product:\", error);\r\n      alert(\"Failed to add product\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container d-flex justify-content-center align-items-center vh-100\">\r\n      <div className=\"w-100\" style={{ maxWidth: \"40rem\" }}>\r\n        <h2 className=\"text-center mb-4\">Add Product</h2>\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"p-4 border rounded shadow-sm bg-light\"\r\n        >\r\n          {/* Image Upload */}\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Upload Image</label>\r\n            <input\r\n              type=\"file\"\r\n              className=\"form-control\"\r\n              accept=\"image/*\"\r\n              onChange={handleImageChange}\r\n              required\r\n            />\r\n            {imagePreview && (\r\n              <img\r\n                src={imagePreview}\r\n                alt=\"Preview\"\r\n                className=\"img-thumbnail mt-2\"\r\n                style={{ maxHeight: \"200px\" }}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* Product Name */}\r\n          <div className=\"mb-3\">\r\n            <label className=\"form-label\">Product Name</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter product name\"\r\n              value={product.name}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Product Category */}\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"category\" className=\"form-label\">\r\n              Product Category\r\n            </label>\r\n            <select\r\n              className=\"form-select\"\r\n              name=\"path\"\r\n              onChange={handleChange}\r\n              value={product.path}\r\n              id=\"category\"\r\n              required\r\n            >\r\n              <option value=\"\">Select Product Category</option>\r\n              <option value=\"/jeans\">Jeans</option>\r\n              <option value=\"/tshirts\">T-Shirts</option>\r\n              <option value=\"/shirts\">Shirts</option>\r\n              <option value=\"/joggers\">Joggers</option>\r\n              <option value=\"/winterCollection\">Winter Collection</option>\r\n            </select>\r\n            <p\r\n              className=\"mt-1 text-danger\"\r\n              style={{ display: \"none\" }}\r\n            >\r\n              Please Select Category Carefully.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-primary w-100\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Uploading...\" : \"Add Product\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}