module.exports=[74248,a=>{"use strict";var b=a.i(87924);a.i(69387);var c=a.i(60574),d=a.i(72131),e=a.i(20706);a.i(60121);var f=a.i(5420);function g(){let a=(0,d.useRef)(null),g=(0,d.useRef)(null),h=(0,d.useRef)(null),[i,j]=(0,d.useState)(""),[k,l]=(0,d.useState)(""),[m,n]=(0,d.useState)(1),[o,p]=(0,d.useState)(1),[q,r]=(0,d.useState)([]),[s,t]=(0,d.useState)({title:"",subTitle:"",price:null,desc:[{title:"",desc:""}],photo:[],category:[],sizes:[],color:[],tags:[],stock:{}});(0,d.useEffect)(()=>{(async()=>{try{let a=await (0,c.getDoc)((0,c.doc)(e.db,"admin","categories"));a.exists()&&r(a.data().list||[])}catch(a){console.error("Error fetching categories:",a)}})()},[]);let u=(a,b,c)=>{let d=[...s.desc];d[a][b]=c,t(a=>({...a,desc:d}))},v=a=>{let b=Array.from(a.target.selectedOptions).map(a=>a.value);t({...s,sizes:b})},w=a=>{t({...s,[a.target.name]:a.target.value})},x=a=>{let b=a.target.files[0];if(!b)return;let c={...s};c.photo.some(a=>a.name===b.name)?alert("File already exists, choose another file."):(c.photo.push(b),t(c))},y=async b=>{if(b.preventDefault(),!s.title||!s.subTitle||!s.price||!s.desc.length||!s.photo.length||!s.sizes.length||!s.color.length){g.current.style.display="block",j("Please fill all the fields.");return}if(s.category)h.current.style.display="none";else{h.current.style.display="block";return}a.current.style.display="block";try{let a=[];for(let b of s.photo){let c=(0,f.ref)(e.storage,`photos/${b.name}`);await (0,f.uploadBytes)(c,b),a.push(await (0,f.getDownloadURL)(c))}let b={title:s.title,subTitle:s.subTitle,price:parseInt(s.price),desc:s.desc,sizes:s.sizes,color:s.color,photo:a,category:s.category,tags:s.tags,stock:s.stock};await (0,c.addDoc)((0,c.collection)(e.db,"products"),b),g.current.style.display="block",j("Product has been uploaded.")}catch(a){console.error(a),g.current.style.display="block",j("Error while uploading product.")}a.current.style.display="none"};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h2",{className:"mt-5 text-center",children:"Add Product"}),(0,b.jsxs)("div",{ref:g,style:{display:"none"},className:"alert alert-success alert-dismissible fade show",role:"alert",children:[i,(0,b.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),(0,b.jsx)("div",{className:"container",children:(0,b.jsxs)("form",{className:"m-3",onSubmit:y,children:[(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Category"}),(0,b.jsxs)("select",{className:"form-select",multiple:!0,name:"category",onChange:a=>{let{name:b,options:c}=a.target,d=Array.from(c).filter(a=>a.selected).map(a=>a.value);t(a=>({...a,[b]:d}))},value:s.category,children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Select category"}),q.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("p",{className:"text-danger",ref:h,style:{display:"none"},children:"Please Select Category Carefully."})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Title"}),(0,b.jsx)("input",{required:!0,type:"text",name:"title",value:s.title,onChange:w,className:"form-control"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Sub Title"}),(0,b.jsx)("input",{required:!0,type:"text",name:"subTitle",value:s.subTitle,onChange:w,className:"form-control"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Description"}),s.desc.map((a,c)=>(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Section Title",value:a.title,onChange:a=>u(c,"title",a.target.value),className:"form-control mb-1"}),(0,b.jsx)("textarea",{placeholder:"Section Description",value:a.desc,onChange:a=>u(c,"desc",a.target.value),className:"form-control"}),s.desc.length>1&&(0,b.jsx)("button",{type:"button",className:"btn btn-danger mt-2",onClick:()=>{let a=s.desc.filter((a,b)=>b!==c);t(b=>({...b,desc:a}))},children:"Remove"})]},c)),(0,b.jsx)("button",{className:"btn btn-secondary mt-2",type:"button",onClick:()=>{t(a=>({...a,desc:[...a.desc,{title:"",desc:""}]}))},children:"Add One More"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Price"}),(0,b.jsx)("input",{required:!0,type:"number",name:"price",value:s.price,onChange:w,className:"form-control"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Select Size Type"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>l("number"),children:"Numbers"}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>l("alphabets"),children:"Alphabets"}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{l("free"),t(a=>({...a,sizes:["Free Size"]}))},children:"Free Size"})]}),"number"===k&&(0,b.jsx)("select",{onChange:v,value:s.sizes,multiple:!0,className:"form-control mt-2",children:[28,30,32,34,36,38,40].map(a=>(0,b.jsx)("option",{value:a,children:a},a))}),"alphabets"===k&&(0,b.jsx)("select",{onChange:v,value:s.sizes,multiple:!0,className:"form-control mt-2",children:["S","M","L","XL","2XL","3XL","4XL","5XL"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{children:"Select Product Color"}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>n(m+1),children:"Add Color"}),(0,b.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{n(Math.max(1,m-1)),t(a=>({...a,color:a.color.slice(0,-1)}))},children:"Remove Last Color"}),(0,b.jsx)("div",{className:"mt-3",children:Array.from({length:m}).map((a,c)=>(0,b.jsx)("input",{type:"text",className:"form-control mb-2",placeholder:"Color name or hex (#ff0000)",value:s.color[c]||"",onChange:a=>{var b;let d;return b=a.target.value,void((d=[...s.color])[c]=b,t({...s,color:d}))}},c))})]}),s.color.length>0&&s.sizes.length>0&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("h5",{children:"Stock Per Size & Color"}),s.color.map(a=>(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("strong",{children:a}),s.sizes.map(c=>(0,b.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,b.jsxs)("label",{className:"me-2",style:{width:"100px"},children:[c,":"]}),(0,b.jsx)("input",{type:"number",className:"form-control",style:{width:"100px"},value:s.stock?.[a]?.[c]||"",onChange:b=>{var d;return d=b.target.value,void t(b=>({...b,stock:{...b.stock,[a]:{...b.stock[a],[c]:Number(d)}}}))}})]},`${a}-${c}`))]},a))]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label mt-3",children:"Product Photos"}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>p(o+1),children:"Add Image"}),(0,b.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{p(Math.max(1,o-1)),t(a=>({...a,photo:a.photo.slice(0,-1)}))},children:"Remove Last Image"}),Array.from({length:o}).map((a,c)=>(0,b.jsx)("input",{type:"file",onChange:x,className:"form-control mt-2"},c))]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:"Product Tags"}),(0,b.jsx)("div",{className:"mb-2",children:s.tags.map((a,c)=>(0,b.jsxs)("span",{className:"badge bg-secondary me-2 mb-2",style:{cursor:"pointer"},onClick:()=>t(a=>({...a,tags:a.tags.filter((a,b)=>b!==c)})),children:[a," Ã—"]},c))}),(0,b.jsx)("input",{type:"text",className:"form-control",placeholder:"Type and press space or enter...",onKeyDown:a=>{if(" "===a.key||"Enter"===a.key){a.preventDefault();let b=a.target.value.trim();b&&t(a=>({...a,tags:a.tags.includes(b)?a.tags:[...a.tags,b]})),a.target.value=""}}})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit"})]})}),(0,b.jsx)("div",{ref:a,className:"text-center position-absolute top-50 start-50 translate-middle",style:{display:"none"},children:(0,b.jsx)("div",{className:"spinner-border",style:{height:"5rem",width:"5rem"},role:"status",children:(0,b.jsx)("span",{className:"sr-only"})})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_adminPanel_upload_page_jsx_441803f2._.js.map