{"version":3,"sources":["../../../../src/app/login/page.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { db, auth } from \"@/firebaseConfig\";\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { userContext } from \"@/components/context/context\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Login() {\r\n//   const User = useContext(userContext);\r\nconst { setUser } = useContext(userContext);\r\n  console.log(setUser+\"hi\");\r\n  const router = useRouter();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    if (!email || !password) {\r\n      setError(\"Both fields are required\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setError(\"\");\r\n\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      localStorage.setItem(\"uid\", user.uid);\r\n\r\n      const docRef = doc(db, \"users\", user.uid);\r\n      const docSnap = await getDoc(docRef);\r\n\r\n      if (docSnap.exists()) {\r\n        setUser(docSnap.data());\r\n        router.push(\"/\");\r\n      } else {\r\n        User.setUser(null);\r\n        setError(\"User data not found\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login Error:\", err);\r\n      setError(\"Enter Valid Credentials\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n      <div className=\"card p-4\" style={{ width: \"400px\" }}>\r\n        <h3 className=\"card-title text-center mb-4\">Login</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">\r\n              Email address\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              placeholder=\"Enter email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"password\" className=\"form-label\">\r\n              Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password\"\r\n              placeholder=\"Password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary w-100\" disabled={loading}>\r\n            {loading ? (\r\n              <div className=\"spinner-border\" role=\"status\">\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            ) : (\r\n              \"Login\"\r\n            )}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"\">\r\n          <p className=\"m-0 mt-3 text-center\">Don't have an account?</p>\r\n          <button className=\"btn btn-primary w-100\" onClick={() => router.push(\"/createAccount\")}>\r\n            Sign-Up\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}